language: java
jdk: oraclejdk8
script: mvn clean verify jacoco:prepare-agent test jacoco:report
after_success:
- bash <(curl -s https://codecov.io/bash)

env:
  global:
  - secure: "VLpjIGylcjNDZfjogx/bKnSk34guGsikcfKqN8FKhoq1mgmVtnWQzWkaz7tS0zEH8GjsDTjARrgkF/TbAcwTX9qV59nbYeYVb+J077vh+a/ONHguNcNzTrsu2NVZmIKT/251lG117f8icZgxWdnh9/uIgOeRSch1+k41ERUyD/B6eivo7v43wuq56Ie5ui0Zp1rjidRAxu9VOJ20pQSpYxss1eANZfZM9IQa8g281huyGjtZboYwcxnRJy2rB4dotRqapxb+0WPs4m71Q3OdvlYxVTfAhTvjLBGNYvWfS0llWAewu+quUrPvoI+h2Kee5gmqiIUmQeqk5RxY6ITbcprtVe8KEclN6hnpGt/GvXAtLWg+insGFgJX87AcdQ8ewokiAdPzIunIcMlCKp6oxydF0iJ7CN0qyTER/rGV6czdRXhlBgMQFiUWNcnkDv7DOWsuwwhWJr7EdQVGKEQ7XQ4BA7gXRHLNW8dd1V6WSJRiCs3R9t6+kK2Rg9t3fLtKgM5JWC/usZdwDWskGnOsZJxeYXKzs2iMTqtCpdszpcStM+uViUDvFWUnCxqBwB8xD3CPgwYng+gAGa4PiCvGTjRCfBlbc0PYB4Gg03uX79nWJOfDxV8Bjnpuz+Pnr9HBGNESEdl/FV/WTDqpqWKtplz66PvRndKb2dp36FOKhD4="

before_install:
- echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
  coverity_scan:
    project:
      name: "jenkinsci/warnings-plugin"
      description: "Jenkins Warnings Plug-in"
    notification_email: ullrich.hafner@gmail.com
    branch_pattern: 5.0